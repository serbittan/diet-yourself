function cov_2oiake8m52(){var path="/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/authenticate-user.spec.js";var hash="9eac3471150f2d02e26e897b580384e2cac033cb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/authenticate-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:39},end:{line:4,column:68}},"3":{start:{line:5,column:19},end:{line:5,column:34}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:25},end:{line:7,column:55}},"6":{start:{line:8,column:15},end:{line:8,column:34}},"7":{start:{line:9,column:25},end:{line:9,column:56}},"8":{start:{line:11,column:0},end:{line:171,column:2}},"9":{start:{line:12,column:4},end:{line:15,column:5}},"10":{start:{line:13,column:8},end:{line:14,column:42}},"11":{start:{line:14,column:24},end:{line:14,column:41}},"12":{start:{line:22,column:4},end:{line:45,column:6}},"13":{start:{line:24,column:8},end:{line:24,column:69}},"14":{start:{line:25,column:8},end:{line:25,column:88}},"15":{start:{line:26,column:8},end:{line:26,column:35}},"16":{start:{line:28,column:8},end:{line:28,column:49}},"17":{start:{line:29,column:8},end:{line:29,column:53}},"18":{start:{line:30,column:8},end:{line:30,column:51}},"19":{start:{line:33,column:8},end:{line:33,column:41}},"20":{start:{line:34,column:8},end:{line:34,column:44}},"21":{start:{line:35,column:8},end:{line:35,column:41}},"22":{start:{line:36,column:8},end:{line:36,column:30}},"23":{start:{line:37,column:8},end:{line:37,column:42}},"24":{start:{line:38,column:8},end:{line:38,column:36}},"25":{start:{line:39,column:8},end:{line:39,column:46}},"26":{start:{line:40,column:8},end:{line:40,column:51}},"27":{start:{line:41,column:8},end:{line:41,column:50}},"28":{start:{line:42,column:8},end:{line:42,column:33}},"29":{start:{line:43,column:8},end:{line:43,column:55}},"30":{start:{line:44,column:8},end:{line:44,column:18}},"31":{start:{line:47,column:4},end:{line:106,column:6}},"32":{start:{line:50,column:8},end:{line:56,column:9}},"33":{start:{line:51,column:12},end:{line:55,column:44}},"34":{start:{line:53,column:20},end:{line:53,column:62}},"35":{start:{line:55,column:30},end:{line:55,column:43}},"36":{start:{line:58,column:8},end:{line:65,column:9}},"37":{start:{line:59,column:12},end:{line:64,column:18}},"38":{start:{line:61,column:20},end:{line:61,column:48}},"39":{start:{line:62,column:20},end:{line:62,column:58}},"40":{start:{line:63,column:20},end:{line:63,column:44}},"41":{start:{line:66,column:8},end:{line:77,column:10}},"42":{start:{line:67,column:12},end:{line:67,column:48}},"43":{start:{line:69,column:12},end:{line:76,column:13}},"44":{start:{line:70,column:16},end:{line:70,column:55}},"45":{start:{line:72,column:16},end:{line:72,column:66}},"46":{start:{line:74,column:16},end:{line:74,column:38}},"47":{start:{line:75,column:16},end:{line:75,column:67}},"48":{start:{line:79,column:8},end:{line:90,column:10}},"49":{start:{line:80,column:12},end:{line:80,column:45}},"50":{start:{line:82,column:12},end:{line:89,column:13}},"51":{start:{line:83,column:16},end:{line:83,column:55}},"52":{start:{line:85,column:16},end:{line:85,column:66}},"53":{start:{line:87,column:16},end:{line:87,column:38}},"54":{start:{line:88,column:16},end:{line:88,column:67}},"55":{start:{line:92,column:8},end:{line:104,column:10}},"56":{start:{line:93,column:12},end:{line:93,column:48}},"57":{start:{line:94,column:12},end:{line:94,column:45}},"58":{start:{line:96,column:12},end:{line:103,column:13}},"59":{start:{line:97,column:16},end:{line:97,column:55}},"60":{start:{line:99,column:16},end:{line:99,column:66}},"61":{start:{line:101,column:16},end:{line:101,column:38}},"62":{start:{line:102,column:16},end:{line:102,column:67}},"63":{start:{line:107,column:4},end:{line:162,column:6}},"64":{start:{line:109,column:8},end:{line:139,column:10}},"65":{start:{line:110,column:12},end:{line:110,column:21}},"66":{start:{line:111,column:12},end:{line:113,column:67}},"67":{start:{line:112,column:16},end:{line:112,column:49}},"68":{start:{line:115,column:12},end:{line:115,column:25}},"69":{start:{line:116,column:12},end:{line:118,column:67}},"70":{start:{line:117,column:16},end:{line:117,column:49}},"71":{start:{line:120,column:12},end:{line:120,column:29}},"72":{start:{line:121,column:12},end:{line:123,column:67}},"73":{start:{line:122,column:16},end:{line:122,column:49}},"74":{start:{line:125,column:12},end:{line:125,column:22}},"75":{start:{line:126,column:12},end:{line:128,column:67}},"76":{start:{line:127,column:16},end:{line:127,column:49}},"77":{start:{line:130,column:12},end:{line:130,column:32}},"78":{start:{line:131,column:12},end:{line:133,column:65}},"79":{start:{line:132,column:16},end:{line:132,column:49}},"80":{start:{line:135,column:12},end:{line:135,column:36}},"81":{start:{line:136,column:12},end:{line:138,column:65}},"82":{start:{line:137,column:16},end:{line:137,column:49}},"83":{start:{line:141,column:8},end:{line:161,column:10}},"84":{start:{line:142,column:12},end:{line:142,column:24}},"85":{start:{line:143,column:12},end:{line:145,column:73}},"86":{start:{line:144,column:16},end:{line:144,column:49}},"87":{start:{line:147,column:12},end:{line:147,column:28}},"88":{start:{line:148,column:12},end:{line:150,column:73}},"89":{start:{line:149,column:16},end:{line:149,column:49}},"90":{start:{line:152,column:12},end:{line:152,column:32}},"91":{start:{line:153,column:12},end:{line:155,column:73}},"92":{start:{line:154,column:16},end:{line:154,column:49}},"93":{start:{line:157,column:12},end:{line:157,column:25}},"94":{start:{line:158,column:12},end:{line:160,column:73}},"95":{start:{line:159,column:16},end:{line:159,column:49}},"96":{start:{line:164,column:4},end:{line:167,column:6}},"97":{start:{line:165,column:8},end:{line:165,column:48}},"98":{start:{line:166,column:8},end:{line:166,column:42}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:29},end:{line:11,column:30}},loc:{start:{line:11,column:35},end:{line:171,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:11},end:{line:12,column:12}},loc:{start:{line:13,column:8},end:{line:14,column:42}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:18},end:{line:14,column:19}},loc:{start:{line:14,column:24},end:{line:14,column:41}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:22,column:16},end:{line:22,column:17}},loc:{start:{line:22,column:22},end:{line:45,column:5}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:47,column:41},end:{line:47,column:42}},loc:{start:{line:47,column:47},end:{line:106,column:5}},line:47},"5":{name:"(anonymous_5)",decl:{start:{line:50,column:19},end:{line:50,column:20}},loc:{start:{line:51,column:12},end:{line:55,column:44}},line:51},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:22},end:{line:52,column:23}},loc:{start:{line:53,column:20},end:{line:53,column:62}},line:53},"7":{name:"(anonymous_7)",decl:{start:{line:55,column:22},end:{line:55,column:23}},loc:{start:{line:55,column:30},end:{line:55,column:43}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:58,column:72},end:{line:58,column:73}},loc:{start:{line:59,column:12},end:{line:64,column:18}},line:59},"9":{name:"(anonymous_9)",decl:{start:{line:60,column:22},end:{line:60,column:23}},loc:{start:{line:60,column:28},end:{line:64,column:17}},line:60},"10":{name:"(anonymous_10)",decl:{start:{line:66,column:45},end:{line:66,column:46}},loc:{start:{line:66,column:57},end:{line:77,column:9}},line:66},"11":{name:"(anonymous_11)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:60},end:{line:90,column:9}},line:79},"12":{name:"(anonymous_12)",decl:{start:{line:92,column:51},end:{line:92,column:52}},loc:{start:{line:92,column:63},end:{line:104,column:9}},line:92},"13":{name:"(anonymous_13)",decl:{start:{line:107,column:30},end:{line:107,column:31}},loc:{start:{line:107,column:36},end:{line:162,column:5}},line:107},"14":{name:"(anonymous_14)",decl:{start:{line:109,column:62},end:{line:109,column:63}},loc:{start:{line:109,column:68},end:{line:139,column:9}},line:109},"15":{name:"(anonymous_15)",decl:{start:{line:111,column:19},end:{line:111,column:20}},loc:{start:{line:112,column:16},end:{line:112,column:49}},line:112},"16":{name:"(anonymous_16)",decl:{start:{line:116,column:19},end:{line:116,column:20}},loc:{start:{line:117,column:16},end:{line:117,column:49}},line:117},"17":{name:"(anonymous_17)",decl:{start:{line:121,column:19},end:{line:121,column:20}},loc:{start:{line:122,column:16},end:{line:122,column:49}},line:122},"18":{name:"(anonymous_18)",decl:{start:{line:126,column:19},end:{line:126,column:20}},loc:{start:{line:127,column:16},end:{line:127,column:49}},line:127},"19":{name:"(anonymous_19)",decl:{start:{line:131,column:19},end:{line:131,column:20}},loc:{start:{line:132,column:16},end:{line:132,column:49}},line:132},"20":{name:"(anonymous_20)",decl:{start:{line:136,column:19},end:{line:136,column:20}},loc:{start:{line:137,column:16},end:{line:137,column:49}},line:137},"21":{name:"(anonymous_21)",decl:{start:{line:141,column:51},end:{line:141,column:52}},loc:{start:{line:141,column:57},end:{line:161,column:9}},line:141},"22":{name:"(anonymous_22)",decl:{start:{line:143,column:19},end:{line:143,column:20}},loc:{start:{line:144,column:16},end:{line:144,column:49}},line:144},"23":{name:"(anonymous_23)",decl:{start:{line:148,column:19},end:{line:148,column:20}},loc:{start:{line:149,column:16},end:{line:149,column:49}},line:149},"24":{name:"(anonymous_24)",decl:{start:{line:153,column:19},end:{line:153,column:20}},loc:{start:{line:154,column:16},end:{line:154,column:49}},line:154},"25":{name:"(anonymous_25)",decl:{start:{line:158,column:19},end:{line:158,column:20}},loc:{start:{line:159,column:16},end:{line:159,column:49}},line:159},"26":{name:"(anonymous_26)",decl:{start:{line:164,column:10},end:{line:164,column:11}},loc:{start:{line:164,column:22},end:{line:167,column:5}},line:164}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9eac3471150f2d02e26e897b580384e2cac033cb"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2oiake8m52=function(){return actualCoverage;};return actualCoverage;}cov_2oiake8m52();cov_2oiake8m52().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_2oiake8m52().s[1]++,process);const{mongoose,models:{User}}=(cov_2oiake8m52().s[2]++,require('diet-yourself-data'));const{expect}=(cov_2oiake8m52().s[3]++,require('chai'));const{random}=(cov_2oiake8m52().s[4]++,Math);const authenticateUser=(cov_2oiake8m52().s[5]++,require('./authenticate-user'));const bcrypt=(cov_2oiake8m52().s[6]++,require('bcryptjs'));const{ContentError}=(cov_2oiake8m52().s[7]++,require("diet-yourself-errors"));cov_2oiake8m52().s[8]++;describe('authenticateUser',()=>{cov_2oiake8m52().f[0]++;cov_2oiake8m52().s[9]++;before(()=>{cov_2oiake8m52().f[1]++;cov_2oiake8m52().s[10]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_2oiake8m52().f[2]++;cov_2oiake8m52().s[11]++;return User.deleteMany();});});//user
let username,email,password,age,height,weight,city,finalWeight,points,id,goal,activity,gender,goalIndex,activityIndex,genderIndex;cov_2oiake8m52().s[12]++;beforeEach(()=>{cov_2oiake8m52().f[3]++;cov_2oiake8m52().s[13]++;goal=["gain muscle mass","maintain weight","lose weight"];cov_2oiake8m52().s[14]++;activity=["sedentary","mild activity","moderate activity","heavy activity"];cov_2oiake8m52().s[15]++;gender=["male","female"];cov_2oiake8m52().s[16]++;goalIndex=Math.floor(Math.random()*3);cov_2oiake8m52().s[17]++;activityIndex=Math.floor(Math.random()*4);cov_2oiake8m52().s[18]++;genderIndex=Math.floor(Math.random()*2);//data to create user
cov_2oiake8m52().s[19]++;username=`username-${random()}`;cov_2oiake8m52().s[20]++;email=`email-${random()}@mail.com`;cov_2oiake8m52().s[21]++;password=`password-${random()}`;cov_2oiake8m52().s[22]++;goal=goal[goalIndex];cov_2oiake8m52().s[23]++;activity=activity[activityIndex];cov_2oiake8m52().s[24]++;gender=gender[genderIndex];cov_2oiake8m52().s[25]++;age=Math.floor(random()*65)+12;cov_2oiake8m52().s[26]++;height=Math.floor(random()*200)+120;cov_2oiake8m52().s[27]++;weight=Math.floor(random()*200)+30;cov_2oiake8m52().s[28]++;city=`city-${random()}`;cov_2oiake8m52().s[29]++;finalWeight=Math.floor(random()*200)+30;cov_2oiake8m52().s[30]++;points=0;});cov_2oiake8m52().s[31]++;describe('when user does not exist',()=>{cov_2oiake8m52().f[4]++;let _id;cov_2oiake8m52().s[32]++;beforeEach(()=>{cov_2oiake8m52().f[5]++;cov_2oiake8m52().s[33]++;return bcrypt.hash(password,10).then(password=>{cov_2oiake8m52().f[6]++;cov_2oiake8m52().s[34]++;return User.create({username,email,password});}).then(user=>{cov_2oiake8m52().f[7]++;cov_2oiake8m52().s[35]++;return _id=user.id;});});cov_2oiake8m52().s[36]++;it('should succeed on correct and valid and right credentials',()=>{cov_2oiake8m52().f[8]++;cov_2oiake8m52().s[37]++;return authenticateUser(email,password).then(id=>{cov_2oiake8m52().f[9]++;cov_2oiake8m52().s[38]++;expect(id).to.be.a('string');cov_2oiake8m52().s[39]++;expect(id.length).to.be.greaterThan(0);cov_2oiake8m52().s[40]++;expect(id).to.equal(_id);});});cov_2oiake8m52().s[41]++;it('should fail on incorrect email',async()=>{cov_2oiake8m52().f[10]++;cov_2oiake8m52().s[42]++;email=`email-${random()}@mail.com`;cov_2oiake8m52().s[43]++;try{cov_2oiake8m52().s[44]++;await authenticateUser(email,password);cov_2oiake8m52().s[45]++;throw new Error('you should not reach this point');}catch(error){cov_2oiake8m52().s[46]++;expect(error).to.exist;cov_2oiake8m52().s[47]++;expect(error.message).to.equal(`wrong credentials`);}});cov_2oiake8m52().s[48]++;it('should fail on incorrect password',async()=>{cov_2oiake8m52().f[11]++;cov_2oiake8m52().s[49]++;password=`password-${random()}`;cov_2oiake8m52().s[50]++;try{cov_2oiake8m52().s[51]++;await authenticateUser(email,password);cov_2oiake8m52().s[52]++;throw new Error('you should not reach this point');}catch(error){cov_2oiake8m52().s[53]++;expect(error).to.exist;cov_2oiake8m52().s[54]++;expect(error.message).to.equal(`wrong credentials`);}});cov_2oiake8m52().s[55]++;it('should fail when user does not exist',async()=>{cov_2oiake8m52().f[12]++;cov_2oiake8m52().s[56]++;email=`email-${random()}@mail.com`;cov_2oiake8m52().s[57]++;password=`password-${random()}`;cov_2oiake8m52().s[58]++;try{cov_2oiake8m52().s[59]++;await authenticateUser(email,password);cov_2oiake8m52().s[60]++;throw new Error('you should not reach this point');}catch(error){cov_2oiake8m52().s[61]++;expect(error).to.exist;cov_2oiake8m52().s[62]++;expect(error.message).to.equal(`wrong credentials`);}});});cov_2oiake8m52().s[63]++;describe('unhappy paths',()=>{cov_2oiake8m52().f[13]++;cov_2oiake8m52().s[64]++;it('should fail on a non-string and non-valid email',()=>{cov_2oiake8m52().f[14]++;cov_2oiake8m52().s[65]++;email=1;cov_2oiake8m52().s[66]++;expect(()=>{cov_2oiake8m52().f[15]++;cov_2oiake8m52().s[67]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_2oiake8m52().s[68]++;email=false;cov_2oiake8m52().s[69]++;expect(()=>{cov_2oiake8m52().f[16]++;cov_2oiake8m52().s[70]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_2oiake8m52().s[71]++;email=undefined;cov_2oiake8m52().s[72]++;expect(()=>{cov_2oiake8m52().f[17]++;cov_2oiake8m52().s[73]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_2oiake8m52().s[74]++;email=[];cov_2oiake8m52().s[75]++;expect(()=>{cov_2oiake8m52().f[18]++;cov_2oiake8m52().s[76]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_2oiake8m52().s[77]++;email='kfjsnfksdn';cov_2oiake8m52().s[78]++;expect(()=>{cov_2oiake8m52().f[19]++;cov_2oiake8m52().s[79]++;return authenticateUser(email,password);}).to.throw(ContentError,`${email} is not an e-mail`);cov_2oiake8m52().s[80]++;email='kfjsnfksdn@123';cov_2oiake8m52().s[81]++;expect(()=>{cov_2oiake8m52().f[20]++;cov_2oiake8m52().s[82]++;return authenticateUser(email,password);}).to.throw(ContentError,`${email} is not an e-mail`);});cov_2oiake8m52().s[83]++;it('should fail on a non-string password',()=>{cov_2oiake8m52().f[21]++;cov_2oiake8m52().s[84]++;password=1;cov_2oiake8m52().s[85]++;expect(()=>{cov_2oiake8m52().f[22]++;cov_2oiake8m52().s[86]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_2oiake8m52().s[87]++;password=false;cov_2oiake8m52().s[88]++;expect(()=>{cov_2oiake8m52().f[23]++;cov_2oiake8m52().s[89]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_2oiake8m52().s[90]++;password=undefined;cov_2oiake8m52().s[91]++;expect(()=>{cov_2oiake8m52().f[24]++;cov_2oiake8m52().s[92]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_2oiake8m52().s[93]++;password=[];cov_2oiake8m52().s[94]++;expect(()=>{cov_2oiake8m52().f[25]++;cov_2oiake8m52().s[95]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);});});cov_2oiake8m52().s[96]++;after(async()=>{cov_2oiake8m52().f[26]++;cov_2oiake8m52().s[97]++;await Promise.resolve(User.deleteMany());cov_2oiake8m52().s[98]++;return await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsImF1dGhlbnRpY2F0ZVVzZXIiLCJiY3J5cHQiLCJDb250ZW50RXJyb3IiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiZGVsZXRlTWFueSIsInVzZXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFnZSIsImhlaWdodCIsIndlaWdodCIsImNpdHkiLCJmaW5hbFdlaWdodCIsInBvaW50cyIsImlkIiwiZ29hbCIsImFjdGl2aXR5IiwiZ2VuZGVyIiwiZ29hbEluZGV4IiwiYWN0aXZpdHlJbmRleCIsImdlbmRlckluZGV4IiwiYmVmb3JlRWFjaCIsImZsb29yIiwiX2lkIiwiaGFzaCIsImNyZWF0ZSIsInVzZXIiLCJpdCIsInRvIiwiYmUiLCJhIiwibGVuZ3RoIiwiZ3JlYXRlclRoYW4iLCJlcXVhbCIsIkVycm9yIiwiZXJyb3IiLCJleGlzdCIsIm1lc3NhZ2UiLCJ0aHJvdyIsIlR5cGVFcnJvciIsInVuZGVmaW5lZCIsImFmdGVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoicXZXQUFBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMkJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDJCQUFpQ1AsT0FBTyxDQUFDLG9CQUFELENBQXhDLENBQU4sQ0FDQSxLQUFNLENBQUVRLE1BQUYsMkJBQWFSLE9B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M0MsRUFQNkMseUJBVzdDQSxRQUFRLENBQUdpQyxTQUFYLENBWDZDLHlCQVk3Q2hELE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ1csS0FBRCxDQUFRQyxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFRXFCLEVBRkYsQ0FFS1UsS0FGTCxDQUVXQyxTQUZYLENBRXVCLFlBQVdoQyxRQUFTLGtCQUYzQyxFQVo2Qyx5QkFnQjdDQSxRQUFRLENBQUcsRUFBWCxDQWhCNkMseUJBaUI3Q2YsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDVyxLQUFELENBQVFDLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVFcUIsRUFGRixDQUVLVSxLQUZMLENBRVdDLFNBRlgsQ0FFdUIsWUFBV2hDLFFBQVMsa0JBRjNDLEVBR0gsQ0FwQkMsQ0FBRixDQXFCSCxDQXZETyxDQUFSLENBaEcrQix5QkF5Si9Ca0MsS0FBSyxDQUFDLFNBQVksbURBQ2QsS0FBTUMsQ0FBQUEsT0FBTyxDQUFDQyxPQUFSLENBQWdCcEQsSUFBSSxDQUFDYSxVQUFMLEVBQWhCLENBQU4sQ0FEYyx5QkFFZCxNQUFPLE1BQU1mLENBQUFBLFFBQVEsQ0FBQ3VELFVBQVQsRUFBYixDQUNILENBSEksQ0FBTCxDQU9ILENBaEtPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ2RpZXQteW91cnNlbGYtZGF0YScpXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxuY29uc3QgYXV0aGVudGljYXRlVXNlciA9IHJlcXVpcmUoJy4vYXV0aGVudGljYXRlLXVzZXInKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuY29uc3QgeyBDb250ZW50RXJyb3IgfSA9IHJlcXVpcmUoXCJkaWV0LXlvdXJzZWxmLWVycm9yc1wiKVxuXG5kZXNjcmliZSgnYXV0aGVudGljYXRlVXNlcicsICgpID0+IHtcbiAgICBiZWZvcmUoKCkgPT5cbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiBVc2VyLmRlbGV0ZU1hbnkoKSlcbiAgICApXG5cbiAgICAgLy91c2VyXG4gICAgIGxldCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZ2UsIGhlaWdodCwgd2VpZ2h0LCBjaXR5LCBmaW5hbFdlaWdodCwgcG9pbnRzLCBpZCwgZ29hbCwgYWN0aXZpdHksIGdlbmRlciwgZ29hbEluZGV4LCBhY3Rpdml0eUluZGV4LCBnZW5kZXJJbmRleFxuXG5cblxuICAgIGJlZm9yZUVhY2goICgpID0+IHtcblxuICAgICAgICBnb2FsID0gW1wiZ2FpbiBtdXNjbGUgbWFzc1wiLCBcIm1haW50YWluIHdlaWdodFwiLCBcImxvc2Ugd2VpZ2h0XCJdXG4gICAgICAgIGFjdGl2aXR5ID0gW1wic2VkZW50YXJ5XCIsIFwibWlsZCBhY3Rpdml0eVwiLCBcIm1vZGVyYXRlIGFjdGl2aXR5XCIsIFwiaGVhdnkgYWN0aXZpdHlcIl1cbiAgICAgICAgZ2VuZGVyID0gW1wibWFsZVwiLCBcImZlbWFsZVwiXVxuXG4gICAgICAgIGdvYWxJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpXG4gICAgICAgIGFjdGl2aXR5SW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgICAgICBnZW5kZXJJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXG5cbiAgICAgICAgLy9kYXRhIHRvIGNyZWF0ZSB1c2VyXG4gICAgICAgIHVzZXJuYW1lID0gYHVzZXJuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG4gICAgICAgIGdvYWwgPSBnb2FsW2dvYWxJbmRleF1cbiAgICAgICAgYWN0aXZpdHkgPSBhY3Rpdml0eVthY3Rpdml0eUluZGV4XVxuICAgICAgICBnZW5kZXIgPSBnZW5kZXJbZ2VuZGVySW5kZXhdXG4gICAgICAgIGFnZSA9IChNYXRoLmZsb29yKHJhbmRvbSgpICogNjUpICsgMTIpXG4gICAgICAgIGhlaWdodCA9IChNYXRoLmZsb29yKHJhbmRvbSgpICogMjAwKSArIDEyMClcbiAgICAgICAgd2VpZ2h0ID0gKE1hdGguZmxvb3IocmFuZG9tKCkgKiAyMDApICsgMzApXG4gICAgICAgIGNpdHkgPSBgY2l0eS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZmluYWxXZWlnaHQgPSAoTWF0aC5mbG9vcihyYW5kb20oKSAqIDIwMCkgKyAzMClcbiAgICAgICAgcG9pbnRzID0gMFxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgX2lkXG5cbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PlxuICAgICAgICAgICAgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuICAgICAgICAgICAgICAgIC50aGVuKHBhc3N3b3JkID0+XG4gICAgICAgICAgICAgICAgICAgIFVzZXIuY3JlYXRlKHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAudGhlbih1c2VyID0+IF9pZCA9IHVzZXIuaWQpXG4gICAgICAgIClcblxuICAgICAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gY29ycmVjdCBhbmQgdmFsaWQgYW5kIHJpZ2h0IGNyZWRlbnRpYWxzJywgKCkgPT5cbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgIC50aGVuKGlkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGlkKS50by5iZS5hKCdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoaWQubGVuZ3RoKS50by5iZS5ncmVhdGVyVGhhbigwKVxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoaWQpLnRvLmVxdWFsKF9pZClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiBpbmNvcnJlY3QgZW1haWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigneW91IHNob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHdyb25nIGNyZWRlbnRpYWxzYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gaW5jb3JyZWN0IHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3lvdSBzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB3cm9uZyBjcmVkZW50aWFsc2ApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIHdoZW4gdXNlciBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3lvdSBzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB3cm9uZyBjcmVkZW50aWFsc2ApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9KVxuICAgIGRlc2NyaWJlKCd1bmhhcHB5IHBhdGhzJywgKCkgPT4ge1xuXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiBhIG5vbi1zdHJpbmcgYW5kIG5vbi12YWxpZCBlbWFpbCcsICgpID0+IHtcbiAgICAgICAgICAgIGVtYWlsID0gMVxuICAgICAgICAgICAgZXhwZWN0KCgpID0+XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYGVtYWlsICR7ZW1haWx9IGlzIG5vdCBhIHN0cmluZ2ApXG5cbiAgICAgICAgICAgIGVtYWlsID0gZmFsc2VcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgKS50by50aHJvdyhUeXBlRXJyb3IsIGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgKVxuXG4gICAgICAgICAgICBlbWFpbCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgZXhwZWN0KCgpID0+XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYGVtYWlsICR7ZW1haWx9IGlzIG5vdCBhIHN0cmluZ2ApXG5cbiAgICAgICAgICAgIGVtYWlsID0gW11cbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgKS50by50aHJvdyhUeXBlRXJyb3IsIGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgKVxuXG4gICAgICAgICAgICBlbWFpbCA9ICdrZmpzbmZrc2RuJ1xuICAgICAgICAgICAgZXhwZWN0KCgpID0+XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICApLnRvLnRocm93KENvbnRlbnRFcnJvciwgYCR7ZW1haWx9IGlzIG5vdCBhbiBlLW1haWxgKVxuXG4gICAgICAgICAgICBlbWFpbCA9ICdrZmpzbmZrc2RuQDEyMydcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgKS50by50aHJvdyhDb250ZW50RXJyb3IsIGAke2VtYWlsfSBpcyBub3QgYW4gZS1tYWlsYClcbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gYSBub24tc3RyaW5nIHBhc3N3b3JkJywgKCkgPT4ge1xuICAgICAgICAgICAgcGFzc3dvcmQgPSAxXG4gICAgICAgICAgICBleHBlY3QoKCkgPT5cbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICkudG8udGhyb3coVHlwZUVycm9yLCBgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYClcblxuICAgICAgICAgICAgcGFzc3dvcmQgPSBmYWxzZVxuICAgICAgICAgICAgZXhwZWN0KCgpID0+XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYHBhc3N3b3JkICR7cGFzc3dvcmR9IGlzIG5vdCBhIHN0cmluZ2ApXG5cbiAgICAgICAgICAgIHBhc3N3b3JkID0gdW5kZWZpbmVkXG4gICAgICAgICAgICBleHBlY3QoKCkgPT5cbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICkudG8udGhyb3coVHlwZUVycm9yLCBgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYClcblxuICAgICAgICAgICAgcGFzc3dvcmQgPSBbXVxuICAgICAgICAgICAgZXhwZWN0KCgpID0+XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYHBhc3N3b3JkICR7cGFzc3dvcmR9IGlzIG5vdCBhIHN0cmluZ2ApXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFVzZXIuZGVsZXRlTWFueSgpKVxuICAgICAgICByZXR1cm4gYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcblxuXG5cbn0pXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iXX0=