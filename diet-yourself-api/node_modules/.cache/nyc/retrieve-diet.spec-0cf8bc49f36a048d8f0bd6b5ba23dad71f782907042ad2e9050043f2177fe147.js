function cov_vorenh1fy(){var path="/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/retrieve-diet.spec.js";var hash="ad298e1332bd47cbec78c9801cc497bdbbe030e7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/retrieve-diet.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:45},end:{line:4,column:74}},"3":{start:{line:5,column:19},end:{line:5,column:34}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:21},end:{line:7,column:47}},"6":{start:{line:8,column:15},end:{line:8,column:34}},"7":{start:{line:9,column:26},end:{line:9,column:57}},"8":{start:{line:11,column:42},end:{line:11,column:72}},"9":{start:{line:12,column:28},end:{line:12,column:48}},"10":{start:{line:14,column:0},end:{line:132,column:2}},"11":{start:{line:16,column:4},end:{line:19,column:5}},"12":{start:{line:17,column:8},end:{line:18,column:40}},"13":{start:{line:18,column:24},end:{line:18,column:39}},"14":{start:{line:28,column:22},end:{line:28,column:51}},"15":{start:{line:30,column:25},end:{line:30,column:72}},"16":{start:{line:30,column:46},end:{line:30,column:71}},"17":{start:{line:31,column:23},end:{line:31,column:68}},"18":{start:{line:31,column:44},end:{line:31,column:67}},"19":{start:{line:32,column:21},end:{line:32,column:64}},"20":{start:{line:32,column:42},end:{line:32,column:63}},"21":{start:{line:33,column:24},end:{line:33,column:69}},"22":{start:{line:33,column:45},end:{line:33,column:68}},"23":{start:{line:34,column:23},end:{line:34,column:73}},"24":{start:{line:34,column:44},end:{line:34,column:72}},"25":{start:{line:36,column:23},end:{line:36,column:70}},"26":{start:{line:37,column:21},end:{line:37,column:66}},"27":{start:{line:38,column:19},end:{line:38,column:62}},"28":{start:{line:39,column:22},end:{line:39,column:68}},"29":{start:{line:40,column:26},end:{line:40,column:71}},"30":{start:{line:43,column:4},end:{line:101,column:6}},"31":{start:{line:45,column:8},end:{line:45,column:70}},"32":{start:{line:46,column:8},end:{line:46,column:90}},"33":{start:{line:47,column:8},end:{line:47,column:36}},"34":{start:{line:49,column:8},end:{line:49,column:49}},"35":{start:{line:50,column:8},end:{line:50,column:53}},"36":{start:{line:51,column:8},end:{line:51,column:51}},"37":{start:{line:54,column:8},end:{line:54,column:41}},"38":{start:{line:55,column:8},end:{line:55,column:44}},"39":{start:{line:56,column:8},end:{line:56,column:41}},"40":{start:{line:57,column:8},end:{line:57,column:31}},"41":{start:{line:58,column:8},end:{line:58,column:44}},"42":{start:{line:59,column:8},end:{line:59,column:37}},"43":{start:{line:60,column:8},end:{line:60,column:46}},"44":{start:{line:61,column:8},end:{line:61,column:51}},"45":{start:{line:62,column:8},end:{line:62,column:50}},"46":{start:{line:63,column:8},end:{line:63,column:33}},"47":{start:{line:64,column:8},end:{line:64,column:55}},"48":{start:{line:65,column:8},end:{line:65,column:18}},"49":{start:{line:71,column:8},end:{line:71,column:42}},"50":{start:{line:73,column:8},end:{line:73,column:144}},"51":{start:{line:75,column:8},end:{line:75,column:71}},"52":{start:{line:80,column:21},end:{line:80,column:141}},"53":{start:{line:82,column:8},end:{line:82,column:20}},"54":{start:{line:86,column:8},end:{line:86,column:57}},"55":{start:{line:88,column:8},end:{line:88,column:24}},"56":{start:{line:90,column:8},end:{line:90,column:33}},"57":{start:{line:92,column:8},end:{line:92,column:57}},"58":{start:{line:94,column:8},end:{line:94,column:26}},"59":{start:{line:96,column:8},end:{line:96,column:34}},"60":{start:{line:99,column:8},end:{line:99,column:25}},"61":{start:{line:104,column:4},end:{line:113,column:6}},"62":{start:{line:104,column:59},end:{line:104,column:67}},"63":{start:{line:105,column:42},end:{line:105,column:72}},"64":{start:{line:108,column:8},end:{line:108,column:31}},"65":{start:{line:109,column:8},end:{line:109,column:44}},"66":{start:{line:110,column:8},end:{line:110,column:44}},"67":{start:{line:115,column:4},end:{line:127,column:6}},"68":{start:{line:116,column:26},end:{line:116,column:40}},"69":{start:{line:118,column:8},end:{line:126,column:9}},"70":{start:{line:119,column:12},end:{line:119,column:47}},"71":{start:{line:121,column:12},end:{line:121,column:54}},"72":{start:{line:123,column:12},end:{line:123,column:34}},"73":{start:{line:124,column:12},end:{line:124,column:60}},"74":{start:{line:125,column:12},end:{line:125,column:83}},"75":{start:{line:129,column:4},end:{line:130,column:43}},"76":{start:{line:129,column:16},end:{line:130,column:42}},"77":{start:{line:130,column:20},end:{line:130,column:41}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:33},end:{line:14,column:34}},loc:{start:{line:14,column:39},end:{line:132,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:11},end:{line:16,column:12}},loc:{start:{line:17,column:8},end:{line:18,column:40}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:18},end:{line:18,column:19}},loc:{start:{line:18,column:24},end:{line:18,column:39}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:38},end:{line:30,column:39}},loc:{start:{line:30,column:46},end:{line:30,column:71}},line:30},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:36},end:{line:31,column:37}},loc:{start:{line:31,column:44},end:{line:31,column:67}},line:31},"5":{name:"(anonymous_5)",decl:{start:{line:32,column:34},end:{line:32,column:35}},loc:{start:{line:32,column:42},end:{line:32,column:63}},line:32},"6":{name:"(anonymous_6)",decl:{start:{line:33,column:37},end:{line:33,column:38}},loc:{start:{line:33,column:45},end:{line:33,column:68}},line:33},"7":{name:"(anonymous_7)",decl:{start:{line:34,column:36},end:{line:34,column:37}},loc:{start:{line:34,column:44},end:{line:34,column:72}},line:34},"8":{name:"(anonymous_8)",decl:{start:{line:43,column:15},end:{line:43,column:16}},loc:{start:{line:43,column:27},end:{line:101,column:5}},line:43},"9":{name:"(anonymous_9)",decl:{start:{line:104,column:46},end:{line:104,column:47}},loc:{start:{line:104,column:58},end:{line:113,column:5}},line:104},"10":{name:"(anonymous_10)",decl:{start:{line:115,column:39},end:{line:115,column:40}},loc:{start:{line:115,column:51},end:{line:127,column:5}},line:115},"11":{name:"(anonymous_11)",decl:{start:{line:129,column:10},end:{line:129,column:11}},loc:{start:{line:129,column:16},end:{line:130,column:42}},line:129},"12":{name:"(anonymous_12)",decl:{start:{line:130,column:14},end:{line:130,column:15}},loc:{start:{line:130,column:20},end:{line:130,column:41}},line:130}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ad298e1332bd47cbec78c9801cc497bdbbe030e7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_vorenh1fy=function(){return actualCoverage;};return actualCoverage;}cov_vorenh1fy();cov_vorenh1fy().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_vorenh1fy().s[1]++,process);const{mongoose,models:{User,Diet}}=(cov_vorenh1fy().s[2]++,require('diet-yourself-data'));const{expect}=(cov_vorenh1fy().s[3]++,require('chai'));const{random}=(cov_vorenh1fy().s[4]++,Math);const retrieveDiet=(cov_vorenh1fy().s[5]++,require('./retrieve-diet'));const bcrypt=(cov_vorenh1fy().s[6]++,require('bcryptjs'));const{NotFoundError}=(cov_vorenh1fy().s[7]++,require("diet-yourself-errors"));const{constants:{methods,foods}}=(cov_vorenh1fy().s[8]++,require("diet-yourself-utils"));const{calculatePoints}=(cov_vorenh1fy().s[9]++,require('./helpers'));cov_vorenh1fy().s[10]++;describe('retrieve unique diet',()=>{cov_vorenh1fy().f[0]++;cov_vorenh1fy().s[11]++;before(()=>{cov_vorenh1fy().f[1]++;cov_vorenh1fy().s[12]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_vorenh1fy().f[2]++;cov_vorenh1fy().s[13]++;return User.deleteMany;});});//user
let username,email,password,age,height,weight,city,finalWeight,points,id,goal,activity,gender,goalIndex,activityIndex,genderIndex;let goals,activities,genders;//diet
let method,_foods,idDiet,diet,diet2;let methodIndex=(cov_vorenh1fy().s[14]++,Math.floor(Math.random()*4));const proteinFoods=(cov_vorenh1fy().s[15]++,foods.filter(food=>{cov_vorenh1fy().f[3]++;cov_vorenh1fy().s[16]++;return food.domain==='protein';}));const carbsFoods=(cov_vorenh1fy().s[17]++,foods.filter(food=>{cov_vorenh1fy().f[4]++;cov_vorenh1fy().s[18]++;return food.domain==='carbs';}));const fatFoods=(cov_vorenh1fy().s[19]++,foods.filter(food=>{cov_vorenh1fy().f[5]++;cov_vorenh1fy().s[20]++;return food.domain==='fat';}));const fruitsFoods=(cov_vorenh1fy().s[21]++,foods.filter(food=>{cov_vorenh1fy().f[6]++;cov_vorenh1fy().s[22]++;return food.domain==="fruit";}));const vegetables=(cov_vorenh1fy().s[23]++,foods.filter(food=>{cov_vorenh1fy().f[7]++;cov_vorenh1fy().s[24]++;return food.domain==="vegetables";}));let proteinIndex=(cov_vorenh1fy().s[25]++,Math.floor(Math.random()*proteinFoods.length));let carbsIndex=(cov_vorenh1fy().s[26]++,Math.floor(Math.random()*carbsFoods.length));let fatIndex=(cov_vorenh1fy().s[27]++,Math.floor(Math.random()*fatFoods.length));let fruitsIndex=(cov_vorenh1fy().s[28]++,Math.floor(Math.random()*fruitsFoods.length));let vegetablesIndex=(cov_vorenh1fy().s[29]++,Math.floor(Math.random()*vegetables.length));cov_vorenh1fy().s[30]++;beforeEach(async()=>{cov_vorenh1fy().f[8]++;cov_vorenh1fy().s[31]++;goals=["gain muscle mass","maintain weight","lose weight"];cov_vorenh1fy().s[32]++;activities=["sedentary","mild activity","moderate activity","heavy activity"];cov_vorenh1fy().s[33]++;genders=["male","female"];cov_vorenh1fy().s[34]++;goalIndex=Math.floor(Math.random()*3);cov_vorenh1fy().s[35]++;activityIndex=Math.floor(Math.random()*4);cov_vorenh1fy().s[36]++;genderIndex=Math.floor(Math.random()*2);//data to create user
cov_vorenh1fy().s[37]++;username=`username-${random()}`;cov_vorenh1fy().s[38]++;email=`email-${random()}@mail.com`;cov_vorenh1fy().s[39]++;password=`password-${random()}`;cov_vorenh1fy().s[40]++;goal=goals[goalIndex];cov_vorenh1fy().s[41]++;activity=activities[activityIndex];cov_vorenh1fy().s[42]++;gender=genders[genderIndex];cov_vorenh1fy().s[43]++;age=Math.floor(random()*65)+12;cov_vorenh1fy().s[44]++;height=Math.floor(random()*200)+120;cov_vorenh1fy().s[45]++;weight=Math.floor(random()*200)+30;cov_vorenh1fy().s[46]++;city=`city-${random()}`;cov_vorenh1fy().s[47]++;finalWeight=Math.floor(random()*200)+30;cov_vorenh1fy().s[48]++;points=0;//data to create diet
cov_vorenh1fy().s[49]++;method=methods[methodIndex].name;cov_vorenh1fy().s[50]++;_foods=[proteinFoods[proteinIndex],carbsFoods[carbsIndex],fatFoods[fatIndex],fruitsFoods[fruitsIndex],vegetables[vegetablesIndex]];cov_vorenh1fy().s[51]++;points=calculatePoints(weight,height,age,gender,activity);//create user and extract id
const user=(cov_vorenh1fy().s[52]++,await User.create({username,email,password,goal,activity,gender,age,height,weight,city,finalWeight,points}));cov_vorenh1fy().s[53]++;id=user.id;//create diet and extract id
cov_vorenh1fy().s[54]++;diet=await new Diet({method,_foods,points});cov_vorenh1fy().s[55]++;idDiet=diet.id;cov_vorenh1fy().s[56]++;user.favorites.push(diet);cov_vorenh1fy().s[57]++;diet2=await new Diet({method,foods,points});cov_vorenh1fy().s[58]++;idDiet2=diet2.id;cov_vorenh1fy().s[59]++;user.favorites.push(diet2);cov_vorenh1fy().s[60]++;await user.save();});cov_vorenh1fy().s[61]++;it('should succeed retrieving user diet',async()=>{cov_vorenh1fy().f[9]++;cov_vorenh1fy().s[62]++;debugger;const{method,foods,points}=(cov_vorenh1fy().s[63]++,await retrieveDiet(id,idDiet));cov_vorenh1fy().s[64]++;expect(method).to.exist;cov_vorenh1fy().s[65]++;expect(method).to.equal(diet.method);cov_vorenh1fy().s[66]++;expect(points).to.equal(diet.points);});cov_vorenh1fy().s[67]++;it('should fail on wrong diet id',async()=>{cov_vorenh1fy().f[10]++;let wrongIdDiet=(cov_vorenh1fy().s[68]++,'293898iujuyh');cov_vorenh1fy().s[69]++;try{cov_vorenh1fy().s[70]++;await retrieveDiet(id,wrongIdDiet);cov_vorenh1fy().s[71]++;throw Error('should not reach this point');}catch(error){cov_vorenh1fy().s[72]++;expect(error).to.exist;cov_vorenh1fy().s[73]++;expect(error).to.be.an.instanceOf(NotFoundError);cov_vorenh1fy().s[74]++;expect(error.message).to.equal(`diet with id ${wrongIdDiet} not found`);}});cov_vorenh1fy().s[75]++;after(()=>{cov_vorenh1fy().f[11]++;cov_vorenh1fy().s[76]++;return User.deleteMany().then(()=>{cov_vorenh1fy().f[12]++;cov_vorenh1fy().s[77]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLWRpZXQuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsInByb2Nlc3MiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJEaWV0IiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsInJldHJpZXZlRGlldCIsImJjcnlwdCIsIk5vdEZvdW5kRXJyb3IiLCJjb25zdGFudHMiLCJtZXRob2RzIiwiZm9vZHMiLCJjYWxjdWxhdGVQb2ludHMiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiZGVsZXRlTWFueSIsInVzZXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFnZSIsImhlaWdodCIsIndlaWdodCIsImNpdHkiLCJmaW5hbFdlaWdodCIsInBvaW50cyIsImlkIiwiZ29hbCIsImFjdGl2aXR5IiwiZ2VuZGVyIiwiZ29hbEluZGV4IiwiYWN0aXZpdHlJbmRleCIsImdlbmRlckluZGV4IiwiZ29hbHMiLCJhY3Rpdml0aWVzIiwiZ2VuZGVycyIsIm1ldGhvZCIsIl9mb29kcyIsImlkRGlldCIsImRpZXQiLCJkaWV0MiIsIm1ldGhvZEluZGV4IiwiZmxvb3IiLCJwcm90ZWluRm9vZHMiLCJmaWx0ZXIiLCJmb29kIiwiZG9tYWluIiwiY2FyYnNGb29kcyIsImZhdEZvb2RzIiwiZnJ1aXRzRm9vZHMiLCJ2ZWdldGFibGVzIiwicHJvdGVpbkluZGV4IiwibGVuZ3RoIiwiY2FyYnNJbmRleCIsImZhdEluZGV4IiwiZnJ1aXRzSW5kZXgiLCJ2ZWdldGFibGVzSW5kZXgiLCJiZWZvcmVFYWNoIiwibmFtZSIsInVzZXIiLCJjcmVhdGUiLCJmYXZvcml0ZXMiLCJwdXNoIiwiaWREaWV0MiIsInNhdmUiLCJpdCIsInRvIiwiZXhpc3QiLCJlcXVhbCIsIndyb25nSWREaWV0IiwiRXJyb3IiLCJlcnJvciIs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LE1BQU9DLEtBQVAsQ0FBYyx5QkFDWnZFLE1BQU0sQ0FBQ3VFLEtBQUQsQ0FBTixDQUFjTCxFQUFkLENBQWlCQyxLQUFqQixDQURZLHdCQUVabkUsTUFBTSxDQUFDdUUsS0FBRCxDQUFOLENBQWNMLEVBQWQsQ0FBaUJNLEVBQWpCLENBQW9CQyxFQUFwQixDQUF1QkMsVUFBdkIsQ0FBa0NyRSxhQUFsQyxFQUZZLHdCQUdaTCxNQUFNLENBQUN1RSxLQUFLLENBQUNJLE9BQVAsQ0FBTixDQUFzQlQsRUFBdEIsQ0FBeUJFLEtBQXpCLENBQWdDLGdCQUFlQyxXQUFZLFlBQTNELEVBQ0gsQ0FDSixDQVpDLENBQUYsQ0FyR21DLHdCQW1IbkNPLEtBQUssQ0FBQyxJQUFNLHVEQUFBOUUsQ0FBQUEsSUFBSSxDQUFDa0IsVUFBTCxHQUNQRCxJQURPLENBQ0YsSUFBTSx1REFBQW5CLENBQUFBLFFBQVEsQ0FBQ2lGLFVBQVQsR0FBcUIsQ0FEekIsRUFDMEIsQ0FEakMsQ0FBTCxDQUdILENBdEhPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBEaWV0IH0gfSA9IHJlcXVpcmUoJ2RpZXQteW91cnNlbGYtZGF0YScpXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxuY29uc3QgcmV0cmlldmVEaWV0ID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS1kaWV0JylcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciB9ID0gcmVxdWlyZShcImRpZXQteW91cnNlbGYtZXJyb3JzXCIpXG5cbmNvbnN0IHsgY29uc3RhbnRzOiB7IG1ldGhvZHMsIGZvb2RzIH0gfSA9IHJlcXVpcmUoXCJkaWV0LXlvdXJzZWxmLXV0aWxzXCIpXG5jb25zdCB7IGNhbGN1bGF0ZVBvaW50cyB9ID0gcmVxdWlyZSgnLi9oZWxwZXJzJylcblxuZGVzY3JpYmUoJ3JldHJpZXZlIHVuaXF1ZSBkaWV0JywgKCkgPT4ge1xuXG4gICAgYmVmb3JlKCgpID0+XG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3QoVEVTVF9NT05HT0RCX1VSTCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gVXNlci5kZWxldGVNYW55KVxuICAgIClcblxuICAgIC8vdXNlclxuICAgIGxldCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZ2UsIGhlaWdodCwgd2VpZ2h0LCBjaXR5LCBmaW5hbFdlaWdodCwgcG9pbnRzLCBpZCwgZ29hbCwgYWN0aXZpdHksIGdlbmRlciwgZ29hbEluZGV4LCBhY3Rpdml0eUluZGV4LCBnZW5kZXJJbmRleFxuICAgIGxldCBnb2FscywgYWN0aXZpdGllcywgZ2VuZGVyc1xuXG4gICAgLy9kaWV0XG5cbiAgICBsZXQgbWV0aG9kLCBfZm9vZHMsIGlkRGlldCwgZGlldCwgZGlldDJcbiAgICBsZXQgbWV0aG9kSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuXG4gICAgY29uc3QgcHJvdGVpbkZvb2RzID0gZm9vZHMuZmlsdGVyKGZvb2QgPT4gZm9vZC5kb21haW4gPT09ICdwcm90ZWluJylcbiAgICBjb25zdCBjYXJic0Zvb2RzID0gZm9vZHMuZmlsdGVyKGZvb2QgPT4gZm9vZC5kb21haW4gPT09ICdjYXJicycpXG4gICAgY29uc3QgZmF0Rm9vZHMgPSBmb29kcy5maWx0ZXIoZm9vZCA9PiBmb29kLmRvbWFpbiA9PT0gJ2ZhdCcpXG4gICAgY29uc3QgZnJ1aXRzRm9vZHMgPSBmb29kcy5maWx0ZXIoZm9vZCA9PiBmb29kLmRvbWFpbiA9PT0gXCJmcnVpdFwiKVxuICAgIGNvbnN0IHZlZ2V0YWJsZXMgPSBmb29kcy5maWx0ZXIoZm9vZCA9PiBmb29kLmRvbWFpbiA9PT0gXCJ2ZWdldGFibGVzXCIpXG5cbiAgICBsZXQgcHJvdGVpbkluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcHJvdGVpbkZvb2RzLmxlbmd0aClcbiAgICBsZXQgY2FyYnNJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNhcmJzRm9vZHMubGVuZ3RoKVxuICAgIGxldCBmYXRJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZhdEZvb2RzLmxlbmd0aClcbiAgICBsZXQgZnJ1aXRzSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmcnVpdHNGb29kcy5sZW5ndGgpXG4gICAgbGV0IHZlZ2V0YWJsZXNJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZlZ2V0YWJsZXMubGVuZ3RoKVxuXG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcblxuICAgICAgICBnb2FscyA9IFtcImdhaW4gbXVzY2xlIG1hc3NcIiwgXCJtYWludGFpbiB3ZWlnaHRcIiwgXCJsb3NlIHdlaWdodFwiXVxuICAgICAgICBhY3Rpdml0aWVzID0gW1wic2VkZW50YXJ5XCIsIFwibWlsZCBhY3Rpdml0eVwiLCBcIm1vZGVyYXRlIGFjdGl2aXR5XCIsIFwiaGVhdnkgYWN0aXZpdHlcIl1cbiAgICAgICAgZ2VuZGVycyA9IFtcIm1hbGVcIiwgXCJmZW1hbGVcIl1cblxuICAgICAgICBnb2FsSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKVxuICAgICAgICBhY3Rpdml0eUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNClcbiAgICAgICAgZ2VuZGVySW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKVxuXG4gICAgICAgIC8vZGF0YSB0byBjcmVhdGUgdXNlclxuICAgICAgICB1c2VybmFtZSA9IGB1c2VybmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZW1haWwgPSBgZW1haWwtJHtyYW5kb20oKX1AbWFpbC5jb21gXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxuICAgICAgICBnb2FsID0gZ29hbHNbZ29hbEluZGV4XVxuICAgICAgICBhY3Rpdml0eSA9IGFjdGl2aXRpZXNbYWN0aXZpdHlJbmRleF1cbiAgICAgICAgZ2VuZGVyID0gZ2VuZGVyc1tnZW5kZXJJbmRleF1cbiAgICAgICAgYWdlID0gKE1hdGguZmxvb3IocmFuZG9tKCkgKiA2NSkgKyAxMilcbiAgICAgICAgaGVpZ2h0ID0gKE1hdGguZmxvb3IocmFuZG9tKCkgKiAyMDApICsgMTIwKVxuICAgICAgICB3ZWlnaHQgPSAoTWF0aC5mbG9vcihyYW5kb20oKSAqIDIwMCkgKyAzMClcbiAgICAgICAgY2l0eSA9IGBjaXR5LSR7cmFuZG9tKCl9YFxuICAgICAgICBmaW5hbFdlaWdodCA9IChNYXRoLmZsb29yKHJhbmRvbSgpICogMjAwKSArIDMwKVxuICAgICAgICBwb2ludHMgPSAwXG5cblxuXG4gICAgICAgIC8vZGF0YSB0byBjcmVhdGUgZGlldFxuXG4gICAgICAgIG1ldGhvZCA9IG1ldGhvZHNbbWV0aG9kSW5kZXhdLm5hbWVcblxuICAgICAgICBfZm9vZHMgPSBbcHJvdGVpbkZvb2RzW3Byb3RlaW5JbmRleF0sIGNhcmJzRm9vZHNbY2FyYnNJbmRleF0sIGZhdEZvb2RzW2ZhdEluZGV4XSwgZnJ1aXRzRm9vZHNbZnJ1aXRzSW5kZXhdLCB2ZWdldGFibGVzW3ZlZ2V0YWJsZXNJbmRleF1dXG5cbiAgICAgICAgcG9pbnRzID0gY2FsY3VsYXRlUG9pbnRzKHdlaWdodCwgaGVpZ2h0LCBhZ2UsIGdlbmRlciwgYWN0aXZpdHkpXG5cblxuICAgICAgICAvL2NyZWF0ZSB1c2VyIGFuZCBleHRyYWN0IGlkXG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgZ29hbCwgYWN0aXZpdHksIGdlbmRlciwgYWdlLCBoZWlnaHQsIHdlaWdodCwgY2l0eSwgZmluYWxXZWlnaHQsIHBvaW50cyB9KVxuXG4gICAgICAgIGlkID0gdXNlci5pZFxuXG4gICAgICAgIC8vY3JlYXRlIGRpZXQgYW5kIGV4dHJhY3QgaWRcblxuICAgICAgICBkaWV0ID0gYXdhaXQgbmV3IERpZXQoeyBtZXRob2QsIF9mb29kcywgcG9pbnRzIH0pXG5cbiAgICAgICAgaWREaWV0ID0gZGlldC5pZFxuXG4gICAgICAgIHVzZXIuZmF2b3JpdGVzLnB1c2goZGlldClcblxuICAgICAgICBkaWV0MiA9IGF3YWl0IG5ldyBEaWV0KHsgbWV0aG9kLCBmb29kcywgcG9pbnRzIH0pXG5cbiAgICAgICAgaWREaWV0MiA9IGRpZXQyLmlkXG5cbiAgICAgICAgdXNlci5mYXZvcml0ZXMucHVzaChkaWV0MilcblxuXG4gICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpXG5cbiAgICB9KVxuXG5cbiAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgcmV0cmlldmluZyB1c2VyIGRpZXQnLCBhc3luYyAoKSA9PiB7ZGVidWdnZXJcbiAgICAgICAgY29uc3QgeyBtZXRob2QsIGZvb2RzLCBwb2ludHMgfSA9IGF3YWl0IHJldHJpZXZlRGlldChpZCwgaWREaWV0KVxuXG5cbiAgICAgICAgZXhwZWN0KG1ldGhvZCkudG8uZXhpc3RcbiAgICAgICAgZXhwZWN0KG1ldGhvZCkudG8uZXF1YWwoZGlldC5tZXRob2QpXG4gICAgICAgIGV4cGVjdChwb2ludHMpLnRvLmVxdWFsKGRpZXQucG9pbnRzKVxuXG5cbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBmYWlsIG9uIHdyb25nIGRpZXQgaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCB3cm9uZ0lkRGlldCA9ICcyOTM4OThpdWp1eWgnXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHJldHJpZXZlRGlldChpZCwgd3JvbmdJZERpZXQpXG5cbiAgICAgICAgICAgIHRocm93IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZU9mKE5vdEZvdW5kRXJyb3IpXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYGRpZXQgd2l0aCBpZCAke3dyb25nSWREaWV0fSBub3QgZm91bmRgKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGFmdGVyKCgpID0+IFVzZXIuZGVsZXRlTWFueSgpXG4gICAgICAgIC50aGVuKCgpID0+IG1vbmdvb3NlLmRpc2Nvbm5lY3QoKSkpXG5cbn0pICAgIl19