function cov_2aawf5df1a(){var path="/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/retrieve-user.js";var hash="2a909552cfdb367fb6dd89e7297756ceae177929";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/retrieve-user.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:51}},"1":{start:{line:2,column:29},end:{line:2,column:58}},"2":{start:{line:3,column:43},end:{line:3,column:74}},"3":{start:{line:4,column:30},end:{line:4,column:50}},"4":{start:{line:6,column:0},end:{line:19,column:231}},"5":{start:{line:7,column:4},end:{line:7,column:29}},"6":{start:{line:9,column:4},end:{line:19,column:230}},"7":{start:{line:11,column:12},end:{line:11,column:83}},"8":{start:{line:11,column:23},end:{line:11,column:83}},"9":{start:{line:13,column:12},end:{line:13,column:96}},"10":{start:{line:13,column:34},end:{line:13,column:96}},"11":{start:{line:15,column:12},end:{line:15,column:37}},"12":{start:{line:17,column:12},end:{line:17,column:30}},"13":{start:{line:19,column:125},end:{line:19,column:228}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:23},end:{line:19,column:231}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:22},end:{line:18,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:15},end:{line:19,column:16}},loc:{start:{line:19,column:125},end:{line:19,column:228}},line:19}},branchMap:{"0":{loc:{start:{line:11,column:12},end:{line:11,column:83}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:83}},{start:{line:11,column:12},end:{line:11,column:83}}],line:11},"1":{loc:{start:{line:13,column:12},end:{line:13,column:96}},type:"if",locations:[{start:{line:13,column:12},end:{line:13,column:96}},{start:{line:13,column:12},end:{line:13,column:96}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2a909552cfdb367fb6dd89e7297756ceae177929"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2aawf5df1a=function(){return actualCoverage;};return actualCoverage;}cov_2aawf5df1a();const{validate}=(cov_2aawf5df1a().s[0]++,require('diet-yourself-utils'));const{models:{User}}=(cov_2aawf5df1a().s[1]++,require('diet-yourself-data'));const{NotFoundError,NotAllowedError}=(cov_2aawf5df1a().s[2]++,require('diet-yourself-errors'));const{calculateCalories}=(cov_2aawf5df1a().s[3]++,require('./helpers'));cov_2aawf5df1a().s[4]++;module.exports=id=>{cov_2aawf5df1a().f[0]++;cov_2aawf5df1a().s[5]++;validate.string(id,'id');cov_2aawf5df1a().s[6]++;return User.findById(id).then(user=>{cov_2aawf5df1a().f[1]++;cov_2aawf5df1a().s[7]++;if(!user){cov_2aawf5df1a().b[0][0]++;cov_2aawf5df1a().s[8]++;throw new NotFoundError(`user with id ${id} does not exist`);}else{cov_2aawf5df1a().b[0][1]++;}cov_2aawf5df1a().s[9]++;if(user.deactivated){cov_2aawf5df1a().b[1][0]++;cov_2aawf5df1a().s[10]++;throw new NotAllowedError(`user with id ${id} is deactivated`);}else{cov_2aawf5df1a().b[1][1]++;}cov_2aawf5df1a().s[11]++;user.retrieved=new Date();cov_2aawf5df1a().s[12]++;return user.save();}).then(({username,age,weight,height,goal,activity,gender,city,finalWeight,diet,favorites,calories})=>{cov_2aawf5df1a().f[2]++;cov_2aawf5df1a().s[13]++;return{username,age,weight,height,goal,activity,gender,city,finalWeight,diet,favorites,calories};});};//calories = calculateCalories(age, weight, height, genre, activity)
// //.then((user) => { user })
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIk5vdEZvdW5kRXJyb3IiLCJOb3RBbGxvd2VkRXJyb3IiLCJjYWxjdWxhdGVDYWxvcmllcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCIsInN0cmluZyIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJkZWFjdGl2YXRlZCIsInJldHJpZXZlZCIsIkRhdGUiLCJzYXZlIiwidXNlcm5hbWUiLCJhZ2UiLCJ3ZWlnaHQiLCJoZWlnaHQiLCJnb2FsIiwiYWN0aXZpdHkiLCJnZW5kZXIiLCJjaXR5IiwiZmluYWxXZWlnaHQiLCJkaWV0IiwiZmF2b3JpdGVzIiwiY2Fsb3JpZXMiXSwibWFwcGluZ3MiOiJraUZBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMscUJBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwyQkFBdUJGLE9BQU8sQ0FBQyxvQkFBRCxDQUE5QixDQUFOLENBQ0EsS0FBTSxDQUFFRyxhQUFGLENBQWlCQyxlQUFqQiwyQkFBcUNKLE9BQU8sQ0FBQyxzQkFBRCxDQUE1QyxDQUFOLENBQ0EsS0FBTSxDQUFFSyxpQkFBRiwyQkFBd0JMLE9BQU8sQ0FBQyxXQUFELENBQS9CLENBQU4sQyx3QkFFQU0sTUFBTSxDQUFDQyxPQUFQLENBQWlCQyxFQUFFLEVBQUksaURBQ25CVCxRQUFRLENBQUNVLE1BQVQsQ0FBZ0JELEVBQWhCLENBQW9CLElBQXBCLEVBRG1CLHdCQUduQixNQUFPTixDQUFBQSxJQUFJLENBQUNRLFFBQUwsQ0FBY0YsRUFBZCxFQUNGRyxJQURFLENBQ0dDLElBQUksRUFBSSxpREFDVixHQUFJLENBQUNBLElBQUwsQ0FBVyx5REFBTSxJQUFJVCxDQUFBQSxhQUFKLENBQW1CLGdCQUFlSyxFQUFHLGlCQUFyQyxDQUFOLENBQTRELENBQXZFLGlDQURVLHdCQUdWLEdBQUlJLElBQUksQ0FBQ0MsV0FBVCxDQUFzQiwwREFBTSxJQUFJVCxDQUFBQSxlQUFKLENBQXFCLGdCQUFlSSxFQUFHLGlCQUF2QyxDQUFOLENBQThELENBQXBGLGlDQUhVLHlCQUtWSSxJQUFJLENBQUNFLFNBQUwsQ0FBaUIsR0FBSUMsQ0FBQUEsSUFBSixFQUFqQixDQUxVLHlCQU9WLE1BQU9ILENBQUFBLElBQUksQ0FBQ0ksSUFBTCxFQUFQLENBQ0gsQ0FURSxFQVVETCxJQVZDLENBVUksQ0FBQyxDQUFFTSxRQUFGLENBQVlDLEdBQVosQ0FBaUJDLE1BQWpCLENBQXlCQyxNQUF6QixDQUFpQ0MsSUFBakMsQ0FBdUNDLFFBQXZDLENBQWlEQyxNQUFqRCxDQUF5REMsSUFBekQsQ0FBK0RDLFdBQS9ELENBQTRFQyxJQUE1RSxDQUFrRkMsU0FBbEYsQ0FBNkZDLFFBQTdGLENBQUQsR0FBOEcseURBQUVYLFFBQUYsQ0FBWUMsR0FBWixDQUFpQkMsTUFBakIsQ0FBeUJDLE1BQXpCLENBQWlDQyxJQUFqQyxDQUF1Q0MsUUFBdkMsQ0FBaURDLE1BQWpELENBQXlEQyxJQUF6RCxDQUErREMsV0FBL0QsQ0FBNEVDLElBQTVFLENBQWtGQyxTQUFsRixDQUE2RkMsUUFBN0YsRUFBdUcsQ0FWek4sQ0FBUCxDQVVtTyxDQWJ2TyxDQWNRO0FBUUoiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdkaWV0LXlvdXJzZWxmLXV0aWxzJylcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIgfSB9ID0gcmVxdWlyZSgnZGlldC15b3Vyc2VsZi1kYXRhJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciwgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCdkaWV0LXlvdXJzZWxmLWVycm9ycycpXG5jb25zdCB7IGNhbGN1bGF0ZUNhbG9yaWVzIH0gPSByZXF1aXJlKCcuL2hlbHBlcnMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlkID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaWQsICdpZCcpXG5cbiAgICByZXR1cm4gVXNlci5maW5kQnlJZChpZClcbiAgICAgICAgLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGB1c2VyIHdpdGggaWQgJHtpZH0gZG9lcyBub3QgZXhpc3RgKVxuXG4gICAgICAgICAgICBpZiAodXNlci5kZWFjdGl2YXRlZCkgdGhyb3cgbmV3IE5vdEFsbG93ZWRFcnJvcihgdXNlciB3aXRoIGlkICR7aWR9IGlzIGRlYWN0aXZhdGVkYClcblxuICAgICAgICAgICAgdXNlci5yZXRyaWV2ZWQgPSBuZXcgRGF0ZVxuXG4gICAgICAgICAgICByZXR1cm4gdXNlci5zYXZlKClcbiAgICAgICAgfSlcbiAgICAgICAgIC50aGVuKCh7IHVzZXJuYW1lLCBhZ2UsIHdlaWdodCwgaGVpZ2h0LCBnb2FsLCBhY3Rpdml0eSwgZ2VuZGVyLCBjaXR5LCBmaW5hbFdlaWdodCwgZGlldCwgZmF2b3JpdGVzLCBjYWxvcmllcyB9KSA9PiAoeyB1c2VybmFtZSwgYWdlLCB3ZWlnaHQsIGhlaWdodCwgZ29hbCwgYWN0aXZpdHksIGdlbmRlciwgY2l0eSwgZmluYWxXZWlnaHQsIGRpZXQsIGZhdm9yaXRlcywgY2Fsb3JpZXMgfSkpfVxuICAgICAgICAvL2NhbG9yaWVzID0gY2FsY3VsYXRlQ2Fsb3JpZXMoYWdlLCB3ZWlnaHQsIGhlaWdodCwgZ2VucmUsIGFjdGl2aXR5KVxuXG5cblxuXG5cblxuXG4gICAgLy8gLy8udGhlbigodXNlcikgPT4geyB1c2VyIH0pIl19