function cov_tgm5nu688(){var path="/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/add-fav-diet.spec.js";var hash="2be09e23d8c93e90009d0360f62b97ba09679aa3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/bootcamp/collab/skylab-bootcamp-202001/staff/sergi-bittan/diet-yourself/diet-yourself-api/logic/add-fav-diet.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:45},end:{line:4,column:74}},"3":{start:{line:6,column:19},end:{line:6,column:34}},"4":{start:{line:7,column:19},end:{line:7,column:23}},"5":{start:{line:8,column:19},end:{line:8,column:44}},"6":{start:{line:10,column:26},end:{line:10,column:57}},"7":{start:{line:12,column:42},end:{line:12,column:72}},"8":{start:{line:13,column:28},end:{line:13,column:48}},"9":{start:{line:15,column:0},end:{line:138,column:2}},"10":{start:{line:17,column:4},end:{line:20,column:5}},"11":{start:{line:18,column:8},end:{line:19,column:76}},"12":{start:{line:19,column:24},end:{line:19,column:75}},"13":{start:{line:29,column:17},end:{line:29,column:19}},"14":{start:{line:30,column:22},end:{line:30,column:51}},"15":{start:{line:32,column:25},end:{line:32,column:72}},"16":{start:{line:32,column:46},end:{line:32,column:71}},"17":{start:{line:33,column:23},end:{line:33,column:68}},"18":{start:{line:33,column:44},end:{line:33,column:67}},"19":{start:{line:34,column:21},end:{line:34,column:64}},"20":{start:{line:34,column:42},end:{line:34,column:63}},"21":{start:{line:35,column:24},end:{line:35,column:69}},"22":{start:{line:35,column:45},end:{line:35,column:68}},"23":{start:{line:36,column:23},end:{line:36,column:73}},"24":{start:{line:36,column:44},end:{line:36,column:72}},"25":{start:{line:38,column:23},end:{line:38,column:70}},"26":{start:{line:39,column:21},end:{line:39,column:66}},"27":{start:{line:40,column:19},end:{line:40,column:62}},"28":{start:{line:41,column:22},end:{line:41,column:68}},"29":{start:{line:42,column:26},end:{line:42,column:71}},"30":{start:{line:45,column:4},end:{line:94,column:6}},"31":{start:{line:47,column:8},end:{line:47,column:70}},"32":{start:{line:48,column:8},end:{line:48,column:90}},"33":{start:{line:49,column:8},end:{line:49,column:36}},"34":{start:{line:51,column:8},end:{line:51,column:49}},"35":{start:{line:52,column:8},end:{line:52,column:53}},"36":{start:{line:53,column:8},end:{line:53,column:51}},"37":{start:{line:56,column:8},end:{line:56,column:41}},"38":{start:{line:57,column:8},end:{line:57,column:44}},"39":{start:{line:58,column:8},end:{line:58,column:41}},"40":{start:{line:59,column:8},end:{line:59,column:31}},"41":{start:{line:60,column:8},end:{line:60,column:44}},"42":{start:{line:61,column:8},end:{line:61,column:37}},"43":{start:{line:62,column:8},end:{line:62,column:46}},"44":{start:{line:63,column:8},end:{line:63,column:51}},"45":{start:{line:64,column:8},end:{line:64,column:50}},"46":{start:{line:65,column:8},end:{line:65,column:33}},"47":{start:{line:66,column:8},end:{line:66,column:55}},"48":{start:{line:67,column:8},end:{line:67,column:18}},"49":{start:{line:70,column:8},end:{line:70,column:42}},"50":{start:{line:72,column:8},end:{line:72,column:144}},"51":{start:{line:74,column:8},end:{line:74,column:71}},"52":{start:{line:79,column:21},end:{line:79,column:141}},"53":{start:{line:81,column:8},end:{line:81,column:20}},"54":{start:{line:82,column:8},end:{line:82,column:16}},"55":{start:{line:86,column:8},end:{line:86,column:67}},"56":{start:{line:88,column:8},end:{line:88,column:27}},"57":{start:{line:89,column:8},end:{line:89,column:27}},"58":{start:{line:92,column:8},end:{line:92,column:25}},"59":{start:{line:97,column:4},end:{line:121,column:6}},"60":{start:{line:97,column:63},end:{line:97,column:71}},"61":{start:{line:99,column:25},end:{line:99,column:45}},"62":{start:{line:100,column:8},end:{line:100,column:37}},"63":{start:{line:102,column:21},end:{line:102,column:44}},"64":{start:{line:104,column:21},end:{line:104,column:35}},"65":{start:{line:106,column:8},end:{line:106,column:39}},"66":{start:{line:108,column:20},end:{line:108,column:25}},"67":{start:{line:110,column:8},end:{line:115,column:10}},"68":{start:{line:110,column:29},end:{line:110,column:37}},"69":{start:{line:112,column:12},end:{line:114,column:13}},"70":{start:{line:113,column:16},end:{line:113,column:28}},"71":{start:{line:117,column:8},end:{line:117,column:32}},"72":{start:{line:123,column:4},end:{line:135,column:6}},"73":{start:{line:124,column:22},end:{line:124,column:36}},"74":{start:{line:126,column:8},end:{line:134,column:9}},"75":{start:{line:127,column:12},end:{line:127,column:37}},"76":{start:{line:129,column:12},end:{line:129,column:54}},"77":{start:{line:131,column:12},end:{line:131,column:34}},"78":{start:{line:132,column:12},end:{line:132,column:60}},"79":{start:{line:133,column:12},end:{line:133,column:84}},"80":{start:{line:137,column:4},end:{line:137,column:102}},"81":{start:{line:137,column:16},end:{line:137,column:101}},"82":{start:{line:137,column:79},end:{line:137,column:100}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:34},end:{line:15,column:35}},loc:{start:{line:15,column:40},end:{line:138,column:1}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:11},end:{line:17,column:12}},loc:{start:{line:18,column:8},end:{line:19,column:76}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:18},end:{line:19,column:19}},loc:{start:{line:19,column:24},end:{line:19,column:75}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:38},end:{line:32,column:39}},loc:{start:{line:32,column:46},end:{line:32,column:71}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:36},end:{line:33,column:37}},loc:{start:{line:33,column:44},end:{line:33,column:67}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:34,column:34},end:{line:34,column:35}},loc:{start:{line:34,column:42},end:{line:34,column:63}},line:34},"6":{name:"(anonymous_6)",decl:{start:{line:35,column:37},end:{line:35,column:38}},loc:{start:{line:35,column:45},end:{line:35,column:68}},line:35},"7":{name:"(anonymous_7)",decl:{start:{line:36,column:36},end:{line:36,column:37}},loc:{start:{line:36,column:44},end:{line:36,column:72}},line:36},"8":{name:"(anonymous_8)",decl:{start:{line:45,column:15},end:{line:45,column:16}},loc:{start:{line:45,column:27},end:{line:94,column:5}},line:45},"9":{name:"(anonymous_9)",decl:{start:{line:97,column:50},end:{line:97,column:51}},loc:{start:{line:97,column:62},end:{line:121,column:5}},line:97},"10":{name:"(anonymous_10)",decl:{start:{line:110,column:21},end:{line:110,column:22}},loc:{start:{line:110,column:28},end:{line:115,column:9}},line:110},"11":{name:"(anonymous_11)",decl:{start:{line:123,column:39},end:{line:123,column:40}},loc:{start:{line:123,column:51},end:{line:135,column:5}},line:123},"12":{name:"(anonymous_12)",decl:{start:{line:137,column:10},end:{line:137,column:11}},loc:{start:{line:137,column:16},end:{line:137,column:101}},line:137},"13":{name:"(anonymous_13)",decl:{start:{line:137,column:73},end:{line:137,column:74}},loc:{start:{line:137,column:79},end:{line:137,column:100}},line:137}},branchMap:{"0":{loc:{start:{line:112,column:12},end:{line:114,column:13}},type:"if",locations:[{start:{line:112,column:12},end:{line:114,column:13}},{start:{line:112,column:12},end:{line:114,column:13}}],line:112}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2be09e23d8c93e90009d0360f62b97ba09679aa3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_tgm5nu688=function(){return actualCoverage;};return actualCoverage;}cov_tgm5nu688();cov_tgm5nu688().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_tgm5nu688().s[1]++,process);const{mongoose,models:{User,Diet}}=(cov_tgm5nu688().s[2]++,require('diet-yourself-data'));const{expect}=(cov_tgm5nu688().s[3]++,require('chai'));const{random}=(cov_tgm5nu688().s[4]++,Math);const addFavDiet=(cov_tgm5nu688().s[5]++,require('./add-fav-diet'));const{NotFoundError}=(cov_tgm5nu688().s[6]++,require("diet-yourself-errors"));const{constants:{methods,foods}}=(cov_tgm5nu688().s[7]++,require("diet-yourself-utils"));const{calculatePoints}=(cov_tgm5nu688().s[8]++,require('./helpers'));cov_tgm5nu688().s[9]++;describe('add diet to favorites',()=>{cov_tgm5nu688().f[0]++;cov_tgm5nu688().s[10]++;before(()=>{cov_tgm5nu688().f[1]++;cov_tgm5nu688().s[11]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_tgm5nu688().f[2]++;cov_tgm5nu688().s[12]++;return Promise.all([User.deleteMany(),Diet.deleteMany()]);});});//user
let username,email,password,age,height,weight,city,finalWeight,points,id,goal,activity,gender,goalIndex,activityIndex,genderIndex;let goals,activities,genders;//diet
let method,idDiet,newDiet;let _foods=(cov_tgm5nu688().s[13]++,[]);let methodIndex=(cov_tgm5nu688().s[14]++,Math.floor(Math.random()*4));const proteinFoods=(cov_tgm5nu688().s[15]++,foods.filter(food=>{cov_tgm5nu688().f[3]++;cov_tgm5nu688().s[16]++;return food.domain==='protein';}));const carbsFoods=(cov_tgm5nu688().s[17]++,foods.filter(food=>{cov_tgm5nu688().f[4]++;cov_tgm5nu688().s[18]++;return food.domain==='carbs';}));const fatFoods=(cov_tgm5nu688().s[19]++,foods.filter(food=>{cov_tgm5nu688().f[5]++;cov_tgm5nu688().s[20]++;return food.domain==='fat';}));const fruitsFoods=(cov_tgm5nu688().s[21]++,foods.filter(food=>{cov_tgm5nu688().f[6]++;cov_tgm5nu688().s[22]++;return food.domain==="fruit";}));const vegetables=(cov_tgm5nu688().s[23]++,foods.filter(food=>{cov_tgm5nu688().f[7]++;cov_tgm5nu688().s[24]++;return food.domain==="vegetables";}));let proteinIndex=(cov_tgm5nu688().s[25]++,Math.floor(Math.random()*proteinFoods.length));let carbsIndex=(cov_tgm5nu688().s[26]++,Math.floor(Math.random()*carbsFoods.length));let fatIndex=(cov_tgm5nu688().s[27]++,Math.floor(Math.random()*fatFoods.length));let fruitsIndex=(cov_tgm5nu688().s[28]++,Math.floor(Math.random()*fruitsFoods.length));let vegetablesIndex=(cov_tgm5nu688().s[29]++,Math.floor(Math.random()*vegetables.length));cov_tgm5nu688().s[30]++;beforeEach(async()=>{cov_tgm5nu688().f[8]++;cov_tgm5nu688().s[31]++;goals=["gain muscle mass","maintain weight","lose weight"];cov_tgm5nu688().s[32]++;activities=["sedentary","mild activity","moderate activity","heavy activity"];cov_tgm5nu688().s[33]++;genders=["male","female"];cov_tgm5nu688().s[34]++;goalIndex=Math.floor(Math.random()*3);cov_tgm5nu688().s[35]++;activityIndex=Math.floor(Math.random()*4);cov_tgm5nu688().s[36]++;genderIndex=Math.floor(Math.random()*2);//data to create user
cov_tgm5nu688().s[37]++;username=`username-${random()}`;cov_tgm5nu688().s[38]++;email=`email-${random()}@mail.com`;cov_tgm5nu688().s[39]++;password=`password-${random()}`;cov_tgm5nu688().s[40]++;goal=goals[goalIndex];cov_tgm5nu688().s[41]++;activity=activities[activityIndex];cov_tgm5nu688().s[42]++;gender=genders[genderIndex];cov_tgm5nu688().s[43]++;age=Math.floor(random()*65)+12;cov_tgm5nu688().s[44]++;height=Math.floor(random()*200)+120;cov_tgm5nu688().s[45]++;weight=Math.floor(random()*200)+30;cov_tgm5nu688().s[46]++;city=`city-${random()}`;cov_tgm5nu688().s[47]++;finalWeight=Math.floor(random()*200)+30;cov_tgm5nu688().s[48]++;points=0;//data to create diet
cov_tgm5nu688().s[49]++;method=methods[methodIndex].name;cov_tgm5nu688().s[50]++;_foods=[proteinFoods[proteinIndex],carbsFoods[carbsIndex],fatFoods[fatIndex],fruitsFoods[fruitsIndex],vegetables[vegetablesIndex]];cov_tgm5nu688().s[51]++;points=calculatePoints(weight,height,age,gender,activity);//create user and extract id
const user=(cov_tgm5nu688().s[52]++,await User.create({username,email,password,goal,activity,gender,age,height,weight,city,finalWeight,points}));cov_tgm5nu688().s[53]++;id=user.id;cov_tgm5nu688().s[54]++;debugger;//create diet and extract id
cov_tgm5nu688().s[55]++;newDiet=await new Diet({method,foods:_foods,points});cov_tgm5nu688().s[56]++;idDiet=newDiet.id;cov_tgm5nu688().s[57]++;user.diet=newDiet;cov_tgm5nu688().s[58]++;await user.save();});cov_tgm5nu688().s[59]++;it('should succeed adding diet to user favs',async()=>{cov_tgm5nu688().f[9]++;cov_tgm5nu688().s[60]++;debugger;const response=(cov_tgm5nu688().s[61]++,await addFavDiet(id));cov_tgm5nu688().s[62]++;expect(response).to.not.exist;const user=(cov_tgm5nu688().s[63]++,await User.findById(id));const favs=(cov_tgm5nu688().s[64]++,user.favorites);cov_tgm5nu688().s[65]++;expect(favs.length).to.equal(1);let isFav=(cov_tgm5nu688().s[66]++,false);cov_tgm5nu688().s[67]++;favs.forEach(fav=>{cov_tgm5nu688().f[10]++;cov_tgm5nu688().s[68]++;debugger;cov_tgm5nu688().s[69]++;if(fav.id===user.diet.id){cov_tgm5nu688().b[0][0]++;cov_tgm5nu688().s[70]++;isFav=true;}else{cov_tgm5nu688().b[0][1]++;}});cov_tgm5nu688().s[71]++;expect(isFav).to.be.true;});cov_tgm5nu688().s[72]++;it('should fail on wrong user id',async()=>{cov_tgm5nu688().f[11]++;let wrongId=(cov_tgm5nu688().s[73]++,'293898iujuyh');cov_tgm5nu688().s[74]++;try{cov_tgm5nu688().s[75]++;await addFavDiet(wrongId);cov_tgm5nu688().s[76]++;throw Error('should not reach this point');}catch(error){cov_tgm5nu688().s[77]++;expect(error).to.exist;cov_tgm5nu688().s[78]++;expect(error).to.be.an.instanceOf(NotFoundError);cov_tgm5nu688().s[79]++;expect(error.message).to.equal(`user with id ${wrongId} does not exist`);}});cov_tgm5nu688().s[80]++;after(()=>{cov_tgm5nu688().f[12]++;cov_tgm5nu688().s[81]++;return Promise.all([User.deleteMany(),Diet.deleteMany()]).then(()=>{cov_tgm5nu688().f[13]++;cov_tgm5nu688().s[82]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1mYXYtZGlldC5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwicHJvY2VzcyIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsIkRpZXQiLCJleHBlY3QiLCJyYW5kb20iLCJNYXRoIiwiYWRkRmF2RGlldCIsIk5vdEZvdW5kRXJyb3IiLCJjb25zdGFudHMiLCJtZXRob2RzIiwiZm9vZHMiLCJjYWxjdWxhdGVQb2ludHMiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiUHJvbWlzZSIsImFsbCIsImRlbGV0ZU1hbnkiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhZ2UiLCJoZWlnaHQiLCJ3ZWlnaHQiLCJjaXR5IiwiZmluYWxXZWlnaHQiLCJwb2ludHMiLCJpZCIsImdvYWwiLCJhY3Rpdml0eSIsImdlbmRlciIsImdvYWxJbmRleCIsImFjdGl2aXR5SW5kZXgiLCJnZW5kZXJJbmRleCIsImdvYWxzIiwiYWN0aXZpdGllcyIsImdlbmRlcnMiLCJtZXRob2QiLCJpZERpZXQiLCJuZXdEaWV0IiwiX2Zvb2RzIiwibWV0aG9kSW5kZXgiLCJmbG9vciIsInByb3RlaW5Gb29kcyIsImZpbHRlciIsImZvb2QiLCJkb21haW4iLCJjYXJic0Zvb2RzIiwiZmF0Rm9vZHMiLCJmcnVpdHNGb29kcyIsInZlZ2V0YWJsZXMiLCJwcm90ZWluSW5kZXgiLCJsZW5ndGgiLCJjYXJic0luZGV4IiwiZmF0SW5kZXgiLCJmcnVpdHNJbmRleCIsInZlZ2V0YWJsZXNJbmRleCIsImJlZm9yZUVhY2giLCJuYW1lIiwidXNlciIsImNyZWF0ZSIsImRpZXQiLCJzYXZlIiwiaXQiLCJyZXNwb25zZSIsInRvIiwibm90IiwiZXhpc3QiLCJmaW5kQnlJZCIsImZhdnMiLCJmYXZvcml0ZXMiLCJlcXVhbCIsImlzRmF2IiwiZm9yRWFjaCIsImZhdiIsImJlIiwidHJ1ZSIsIndyb25nSWQiLCJFcnJvciIsImVycm9yIiwiYW4iLCJpbnN0YW5jZU9mIiwibWVzc2FnZSIsImFmdGVyIiwiZGlzY29ubmVjdCJdLCJtYXBwaW5ncyI6InUzUUFBQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsR0FFQSxLQUFNLENBQUVDLEdBQUcsQ0FBRSxDQUFFQyxnQkFBRixDQUFQLDBCQUFnQ0MsT0FBaEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsUUFBRixDQUFZQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQXBCLDBCQUF1Q1IsT0FBTyxDQUFDLG9CQUFELENBQTlDLENBQU4sQ0FFQSxLQUFNLENBQUVTLE1BQUYsMEJBQWFULE9BQU8sQ0FBQyxNQUFELENBQXBCLENBQU4sQ0FDQSxLQUFNLENBQUVVLE1BQUYsMEJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU1DLENBQUFBLFVBQVUseUJBQUdaLE9BQU8sQ0FBQyxnQkFBRCxDQUFWLENBQWhCLENBRUEsS0FBTSxDQUFFYSxhQUFGLDBCQUFvQmIsT0FBTyxDQUFDLHNCQUFELENBQTNCLENBQU4sQ0FFQSxLQUFNLENBQUVjLFNBQVMsQ0FBRSxDQUFFQyxPQUFGLENBQVdDLEtBQVgsQ0FBYiwwQkFBb0NoQixPQUFPLENBQUMscUJBQUQsQ0FBM0MsQ0FBTixDQUNBLEtBQU0sQ0FBRWlCLGVBQUYsMEJBQXNCakIsT0FBTyxDQUFDLFdBQUQsQ0FBN0IsQ0FBTixDLHVCQUVBa0IsUUFBUSxDQUFDLHVCQUFELENBQTBCLElBQU0sZ0RBRXBDQyxNQUFNLENBQUMsSUFDSCxzREFBQWQsQ0FBQUEsUUFBUSxDQUFDZSxPQUFULENBQWlCakIsZ0JBQWpCLENBQW1DLENBQUVrQixlQUFlLENBQUUsSUFBbkIsQ0FBeUJDLGtCQUFrQixDQUFFLElBQTdDLENBQW5DLEVBQ0tDLElBREwsQ0FDVSxJQUFNLHNEQUFBQyxDQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxDQUFDbEIsSUFB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cENiLEVBQUUsQ0FBQyw4QkFBRCxDQUFpQyxTQUFZLHlCQUMzQyxHQUFJYyxDQUFBQSxPQUFPLDBCQUFHLGNBQUgsQ0FBWCxDQUQyQyx3QkFHM0MsR0FBSSx5QkFDQSxLQUFNMUUsQ0FBQUEsVUFBVSxDQUFDMEUsT0FBRCxDQUFoQixDQURBLHdCQUdBLEtBQU1DLENBQUFBLEtBQUssQ0FBQyw2QkFBRCxDQUFYLENBQ0gsQ0FBQyxNQUFPQyxLQUFQLENBQWMseUJBQ1ovRSxNQUFNLENBQUMrRSxLQUFELENBQU4sQ0FBY2QsRUFBZCxDQUFpQkUsS0FBakIsQ0FEWSx3QkFFWm5FLE1BQU0sQ0FBQytFLEtBQUQsQ0FBTixDQUFjZCxFQUFkLENBQWlCVSxFQUFqQixDQUFvQkssRUFBcEIsQ0FBdUJDLFVBQXZCLENBQWtDN0UsYUFBbEMsRUFGWSx3QkFHWkosTUFBTSxDQUFDK0UsS0FBSyxDQUFDRyxPQUFQLENBQU4sQ0FBc0JqQixFQUF0QixDQUF5Qk0sS0FBekIsQ0FBZ0MsZ0JBQWVNLE9BQVEsaUJBQXZELEVBQ0gsQ0FDSixDQVpDLENBQUYsQ0E1R29DLHdCQTBIcENNLEtBQUssQ0FBQyxJQUFNLHVEQUFBcEUsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ2xCLElBQUksQ0FBQ21CLFVBQUwsRUFBRCxDQUFvQmxCLElBQUksQ0FBQ2tCLFVBQUwsRUFBcEIsQ0FBWixFQUFvREgsSUFBcEQsQ0FBeUQsSUFBTSx1REFBQWxCLENBQUFBLFFBQVEsQ0FBQ3dGLFVBQVQsR0FBcUIsQ0FBcEYsRUFBcUYsQ0FBNUYsQ0FBTCxDQUNILENBM0hPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBEaWV0IH0gfSA9IHJlcXVpcmUoJ2RpZXQteW91cnNlbGYtZGF0YScpXG5cbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXG5jb25zdCBhZGRGYXZEaWV0ID0gcmVxdWlyZSgnLi9hZGQtZmF2LWRpZXQnKVxuXG5jb25zdCB7IE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoXCJkaWV0LXlvdXJzZWxmLWVycm9yc1wiKVxuXG5jb25zdCB7IGNvbnN0YW50czogeyBtZXRob2RzLCBmb29kcyB9IH0gPSByZXF1aXJlKFwiZGlldC15b3Vyc2VsZi11dGlsc1wiKVxuY29uc3QgeyBjYWxjdWxhdGVQb2ludHMgfSA9IHJlcXVpcmUoJy4vaGVscGVycycpXG5cbmRlc2NyaWJlKCdhZGQgZGlldCB0byBmYXZvcml0ZXMnLCAoKSA9PiB7XG5cbiAgICBiZWZvcmUoKCkgPT5cbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChbVXNlci5kZWxldGVNYW55KCksIERpZXQuZGVsZXRlTWFueSgpXSkpXG4gICAgKVxuXG4gICAgLy91c2VyXG4gICAgbGV0IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFnZSwgaGVpZ2h0LCB3ZWlnaHQsIGNpdHksIGZpbmFsV2VpZ2h0LCBwb2ludHMsIGlkLCBnb2FsLCBhY3Rpdml0eSwgZ2VuZGVyLCBnb2FsSW5kZXgsIGFjdGl2aXR5SW5kZXgsIGdlbmRlckluZGV4XG5cbiAgICBsZXQgZ29hbHMsIGFjdGl2aXRpZXMsIGdlbmRlcnNcbiAgICAvL2RpZXRcblxuICAgIGxldCBtZXRob2QsIGlkRGlldCwgbmV3RGlldFxuICAgIGxldCBfZm9vZHMgPSBbXVxuICAgIGxldCBtZXRob2RJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpXG5cbiAgICBjb25zdCBwcm90ZWluRm9vZHMgPSBmb29kcy5maWx0ZXIoZm9vZCA9PiBmb29kLmRvbWFpbiA9PT0gJ3Byb3RlaW4nKVxuICAgIGNvbnN0IGNhcmJzRm9vZHMgPSBmb29kcy5maWx0ZXIoZm9vZCA9PiBmb29kLmRvbWFpbiA9PT0gJ2NhcmJzJylcbiAgICBjb25zdCBmYXRGb29kcyA9IGZvb2RzLmZpbHRlcihmb29kID0+IGZvb2QuZG9tYWluID09PSAnZmF0JylcbiAgICBjb25zdCBmcnVpdHNGb29kcyA9IGZvb2RzLmZpbHRlcihmb29kID0+IGZvb2QuZG9tYWluID09PSBcImZydWl0XCIpXG4gICAgY29uc3QgdmVnZXRhYmxlcyA9IGZvb2RzLmZpbHRlcihmb29kID0+IGZvb2QuZG9tYWluID09PSBcInZlZ2V0YWJsZXNcIilcblxuICAgIGxldCBwcm90ZWluSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcm90ZWluRm9vZHMubGVuZ3RoKVxuICAgIGxldCBjYXJic0luZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FyYnNGb29kcy5sZW5ndGgpXG4gICAgbGV0IGZhdEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmF0Rm9vZHMubGVuZ3RoKVxuICAgIGxldCBmcnVpdHNJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZydWl0c0Zvb2RzLmxlbmd0aClcbiAgICBsZXQgdmVnZXRhYmxlc0luZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmVnZXRhYmxlcy5sZW5ndGgpXG5cblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGdvYWxzID0gW1wiZ2FpbiBtdXNjbGUgbWFzc1wiLCBcIm1haW50YWluIHdlaWdodFwiLCBcImxvc2Ugd2VpZ2h0XCJdXG4gICAgICAgIGFjdGl2aXRpZXMgPSBbXCJzZWRlbnRhcnlcIiwgXCJtaWxkIGFjdGl2aXR5XCIsIFwibW9kZXJhdGUgYWN0aXZpdHlcIiwgXCJoZWF2eSBhY3Rpdml0eVwiXVxuICAgICAgICBnZW5kZXJzID0gW1wibWFsZVwiLCBcImZlbWFsZVwiXVxuXG4gICAgICAgIGdvYWxJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpXG4gICAgICAgIGFjdGl2aXR5SW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgICAgICBnZW5kZXJJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXG5cbiAgICAgICAgLy9kYXRhIHRvIGNyZWF0ZSB1c2VyXG4gICAgICAgIHVzZXJuYW1lID0gYHVzZXJuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG4gICAgICAgIGdvYWwgPSBnb2Fsc1tnb2FsSW5kZXhdXG4gICAgICAgIGFjdGl2aXR5ID0gYWN0aXZpdGllc1thY3Rpdml0eUluZGV4XVxuICAgICAgICBnZW5kZXIgPSBnZW5kZXJzW2dlbmRlckluZGV4XVxuICAgICAgICBhZ2UgPSAoTWF0aC5mbG9vcihyYW5kb20oKSAqIDY1KSArIDEyKVxuICAgICAgICBoZWlnaHQgPSAoTWF0aC5mbG9vcihyYW5kb20oKSAqIDIwMCkgKyAxMjApXG4gICAgICAgIHdlaWdodCA9IChNYXRoLmZsb29yKHJhbmRvbSgpICogMjAwKSArIDMwKVxuICAgICAgICBjaXR5ID0gYGNpdHktJHtyYW5kb20oKX1gXG4gICAgICAgIGZpbmFsV2VpZ2h0ID0gKE1hdGguZmxvb3IocmFuZG9tKCkgKiAyMDApICsgMzApXG4gICAgICAgIHBvaW50cyA9IDBcbiAgICAgICAgLy9kYXRhIHRvIGNyZWF0ZSBkaWV0XG5cbiAgICAgICAgbWV0aG9kID0gbWV0aG9kc1ttZXRob2RJbmRleF0ubmFtZVxuXG4gICAgICAgIF9mb29kcyA9IFtwcm90ZWluRm9vZHNbcHJvdGVpbkluZGV4XSwgY2FyYnNGb29kc1tjYXJic0luZGV4XSwgZmF0Rm9vZHNbZmF0SW5kZXhdLCBmcnVpdHNGb29kc1tmcnVpdHNJbmRleF0sIHZlZ2V0YWJsZXNbdmVnZXRhYmxlc0luZGV4XV1cblxuICAgICAgICBwb2ludHMgPSBjYWxjdWxhdGVQb2ludHMod2VpZ2h0LCBoZWlnaHQsIGFnZSwgZ2VuZGVyLCBhY3Rpdml0eSlcblxuXG4gICAgICAgIC8vY3JlYXRlIHVzZXIgYW5kIGV4dHJhY3QgaWRcblxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBnb2FsLCBhY3Rpdml0eSwgZ2VuZGVyLCBhZ2UsIGhlaWdodCwgd2VpZ2h0LCBjaXR5LCBmaW5hbFdlaWdodCwgcG9pbnRzIH0pXG5cbiAgICAgICAgaWQgPSB1c2VyLmlkXG4gICAgICAgIGRlYnVnZ2VyXG5cbiAgICAgICAgLy9jcmVhdGUgZGlldCBhbmQgZXh0cmFjdCBpZFxuXG4gICAgICAgIG5ld0RpZXQgPSBhd2FpdCBuZXcgRGlldCh7IG1ldGhvZCwgZm9vZHM6IF9mb29kcywgcG9pbnRzIH0pXG5cbiAgICAgICAgaWREaWV0ID0gbmV3RGlldC5pZFxuICAgICAgICB1c2VyLmRpZXQgPSBuZXdEaWV0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKClcblxuICAgIH0pXG5cblxuICAgIGl0KCdzaG91bGQgc3VjY2VlZCBhZGRpbmcgZGlldCB0byB1c2VyIGZhdnMnLCBhc3luYyAoKSA9PiB7ZGVidWdnZXJcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRkRmF2RGlldChpZClcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlKS50by5ub3QuZXhpc3RcblxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZClcblxuICAgICAgICBjb25zdCBmYXZzID0gdXNlci5mYXZvcml0ZXNcblxuICAgICAgICBleHBlY3QoZmF2cy5sZW5ndGgpLnRvLmVxdWFsKDEpXG5cbiAgICAgICAgbGV0IGlzRmF2ID0gZmFsc2VcblxuICAgICAgICBmYXZzLmZvckVhY2goZmF2ID0+IHtkZWJ1Z2dlclxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmF2LmlkID09PSB1c2VyLmRpZXQuaWQpIHtcbiAgICAgICAgICAgICAgICBpc0ZhdiA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChpc0ZhdikudG8uYmUudHJ1ZVxuXG5cblxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gd3JvbmcgdXNlciBpZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IHdyb25nSWQgPSAnMjkzODk4aXVqdXloJ1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhZGRGYXZEaWV0KHdyb25nSWQpXG5cbiAgICAgICAgICAgIHRocm93IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZU9mKE5vdEZvdW5kRXJyb3IpXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHVzZXIgd2l0aCBpZCAke3dyb25nSWR9IGRvZXMgbm90IGV4aXN0YClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBhZnRlcigoKSA9PiBQcm9taXNlLmFsbChbVXNlci5kZWxldGVNYW55KCksIERpZXQuZGVsZXRlTWFueSgpXSkudGhlbigoKSA9PiBtb25nb29zZS5kaXNjb25uZWN0KCkpKVxufSkgICAiXX0=